const label=$(`<div class="global-label"></div>`);loadLabels();let mouseX=0;let mouseY=0;let currentElement=null;function init(){$(document).off("load");$(document).on("load",loadLabels);$(document).off("mousemove");$(document).on("mousemove",e=>{mouseX=e.pageX;mouseY=e.pageY;const hoverElement=$(e.target);if(hoverElement.attr("data-title")){show(hoverElement)}else{hide()}});if($(".global-label").length===0){$("body").append(label)}}function loadLabels(){if($(".global-label").length===0)init();$(`[title]`).each((i,element)=>{var _a;const el=$(element);el.attr("data-title",(_a=el.attr("title"))!==null&&_a!==void 0?_a:"");el.removeAttr("title")})}function show(element){var _a,_b,_c,_d,_e;if(currentElement!=null&&currentElement[0]==element[0])return;currentElement=element;const title=element.attr("data-title");if(title==null)return;label.html(title);if(element.offset()==null||element.width()==null||label.width()==null||element.height()==null)return;const offset=(_a=element.offset())!==null&&_a!==void 0?_a:{top:0,left:0};const width=(_b=element.width())!==null&&_b!==void 0?_b:0;const height=(_c=element.height())!==null&&_c!==void 0?_c:0;const labelWidth=((_d=label.width())!==null&&_d!==void 0?_d:0)+32;const labelHeight=((_e=label.height())!==null&&_e!==void 0?_e:0)+16;const scrollY=window.scrollY;let x=mouseX-labelWidth/2;let y=offset.top+height-scrollY;console.log(labelWidth,x,x+labelWidth,window.innerWidth);if(x+labelWidth>=window.innerWidth){x=window.innerWidth-labelWidth-10}if(y+labelHeight+16>=window.innerHeight){y=offset.top-labelHeight-20}label.css({top:y,left:x,opacity:1})}function hide(){currentElement=null;label.css({opacity:0,pointerEvents:"none"})}function setLabel(label,element){element.attr("title",label);loadLabels()}$(document).on("scroll",()=>{hide()});export{show,hide,loadLabels,setLabel};